flowchart LR
    %% EventStorming Process Level - More detailed than Big Picture
    classDef event fill:#ff9800,stroke:#e65100,color:#000
    classDef command fill:#2196f3,stroke:#0d47a1,color:#fff
    classDef actor fill:#ffeb3b,stroke:#f57f17,color:#000
    classDef policy fill:#ba68c8,stroke:#6a1b9a,color:#fff
    classDef aggregate fill:#4caf50,stroke:#1b5e20,color:#fff

    %% Start with triggering event or command
    Cmd1[Process Start Command]:::command
    Evt1[First Event]:::event
    Agg1[Aggregate Name]:::aggregate

    %% Policy (business rule)
    Policy1{Business Rule Check}:::policy

    Evt2[Next Event]:::event
    Evt3[Alternative Event]:::event

    %% Flow
    Cmd1 --> Evt1
    Evt1 --> Agg1
    Agg1 --> Policy1
    Policy1 -->|condition met| Evt2
    Policy1 -->|condition failed| Evt3

    %% Annotations
    Evt1 -.data changes.- Note1[field_x updated]
    Evt2 -.data changes.- Note2[field_y set]
